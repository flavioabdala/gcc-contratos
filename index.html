<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Gestão de Contratos</title>
</head>
<body>
  <h1>Gestão de Contratos</h1>

  <div id="auth-section">
    <input type="email" id="email" placeholder="Email" />
    <input type="password" id="password" placeholder="Senha" />
    <button onclick="login()">Login</button>
    <button onclick="register()">Registrar</button>
    <button onclick="logout()" id="logout-btn" style="display:none;">Sair</button>
  </div>

  < Contrato</button>

    <h3>Contratos Registrados</h3>
    <ul id="lista-contratos"></ul>

    <h2>Meus Lembretes</h2>
    <input type="text" id="lembrete" placeholder="Novo Lembrete" />
    <button onclick="adicionarLembrete()">Adicionar Lembrete</button>

    <h3>Lembretes</h3>
    <ul id="lista-lembretes"></ul>
  </div>

  <!-- Firebase SDKs -->
  https://www.gstatic.com/firebasejs/10.5.2/firebase-app-compat.js
  https://www.gstatic.com/firebasejs/10.5.2/firebase-auth-compat.js
  https://www.gstatic.com/firebasejs/10.5.2/firebase-firestore-compat.js

  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDTxRQdMy4QugmySVeSErf5Kqihn_4OhWw",
      authDomain: "gcc-contratos.firebaseapp.com",
      projectId: "gcc-contratos",
      storageBucket: "gcc-contratos.firebasestorage.app",
      messagingSenderId: "405415511927",
      appId: "1:405415511927:web:4612190119302726820372",
      measurementId: "G-T1T4N9WD5T"
    };

    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    auth.onAuthStateChanged(user => {
      if (user) {
        document.getElementById("auth-section").style.display = "none";
        document.getElementById("app-section").style.display = "block";
        document.getElementById("logout-btn").style.display = "inline";
        carregarContratos();
        carregarLembretes();
      } else {
        document.getElementById("auth-section").style.display = "block";
        document.getElementById("app-section").style.display = "none";
        document.getElementById("logout-btn").style.display = "none";
      }
    });

    function login() {
      const email = document.getElementById("email").value;
      const senha = document.getElementById("password").value;
      auth.signInWithEmailAndPassword(email, senha)
        .catch(error => alert("Erro no login: " + error.message));
    }

    function register() {
      const email = document.getElementById("email").value;
      const senha = document.getElementById("password").value;
      auth.createUserWithEmailAndPassword(email, senha)
        .catch(error => alert("Erro no registro: " + error.message));
    }

    function logout() {
      auth.signOut();
    }

    function adicionarContrato() {
      const empresa = document.getElementById("empresa").value;
      const objeto = document.getElementById("objeto").value;
      const user = auth.currentUser;
      if (!user) return;

      db.collection("contratos").add({
        uid: user.uid,
        empresa: empresa,
        objeto: objeto,
        timestamp: Date.now()
      }).then(() => {
        document.getElementById("empresa").value = "";
        document.getElementById("objeto").value = "";
        carregarContratos();
      });
    }

    function carregarContratos() {
      const user = auth.currentUser;
      if (!user) return;
      const lista = document.getElementById("lista-contratos");
      lista.innerHTML = "";
      db.collection("contratos").where("uid", "==", user.uid).get().then(snapshot => {
        snapshot.forEach(doc => {
          const li = document.createElement("li");
          li.textContent = doc.data().empresa + " - " + doc.data().objeto;
          lista.appendChild(li);
        });
      });
    }

    function adicionarLembrete() {
      const texto = document.getElementById("lembrete").value;
      const user = auth.currentUser;
      if (!user) return;

      db.collection("lembretes").add({
        uid: user.uid,
        texto: texto,
        timestamp: Date.now()
      }).then(() => {
        document.getElementById("lembrete").value = "";
        carregarLembretes();
      });
    }

    function carregarLembretes() {
      const user = auth.currentUser;
      if (!user) return;
      const lista = document.getElementById("lista-lembretes");
      lista.innerHTML = "";
      db.collection("lembretes").where("uid", "==", user.uid).get().then(snapshot => {
        snapshot.forEach(doc => {
          const li = document.createElement("li");
          li.textContent = doc.data().texto;
          lista.appendChild(li);
        });
      });
    }
  </script>
</body>
</html>
